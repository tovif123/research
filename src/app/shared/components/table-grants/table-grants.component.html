<table mat-table [dataSource]="data" multiTemplateDataRows matSort>
	<ng-container [matColumnDef]="column.key" *ngFor="let column of columnsToDisplay">
		<th mat-header-cell *matHeaderCellDef> {{column.value}} </th>
		<td mat-cell *matCellDef="let element"> {{element[column.key]}} </td>
	</ng-container>

	<ng-container matColumnDef="expandedDetail">
		<td mat-cell *matCellDef="let element" [attr.colspan]="columnsToDisplay.length">
			<div class="example-element-detail" [@detailExpand]="element?.expanded"  *ngIf="element?.expanded">
				<div style="width: 100%;">

					<table mat-table [dataSource]="element.emploeey" multiTemplateDataRows matSort>
						<ng-container matColumnDef="{{innerColumn.key}}" *ngFor="let innerColumn of innerDisplayedColumns">
							<th mat-header-cell *matHeaderCellDef mat-sort-header> {{innerColumn.value}} </th>
							<td mat-cell *matCellDef="let address"> {{address[innerColumn.key]}} </td>
						
						</ng-container>
						<td mat-cell *matCellDef="let address"> <mat-icon>control_point</mat-icon> </td>
						<ng-container matColumnDef="expandedExpandedDetail">
							<h5>ddddddddddd</h5>
							<td mat-cell *matCellDef="let address" [attr.colspan]="innerInnerDisplayedColumns.length">
								<div class="example-element-detail" [@detailExpand]="address?.expanded" *ngIf="address?.expanded">
									<div style="width: 100%;">
<h3>פרטי עובד</h3>
										<table style="width: 100%;" #inneTables mat-table #innrSort="matSort"
											[dataSource]="address?.deatils_empoeey" matSort>
											<ng-container matColumnDef="{{col.key}}" *ngFor="let col of innerInnerDisplayedColumns">
												<th mat-header-cell *matHeaderCellDef mat-sort-header> {{col.value}} </th>
												<td mat-cell *matCellDef="let comment"> {{comment[col.key]}} </td>
											</ng-container>


											<tr mat-header-row *matHeaderRowDef="innerInnerDisplayedColumns2"></tr>
											<tr mat-row *matRowDef="let comment; columns: innerInnerDisplayedColumns2;">
											</tr>
										</table>
									</div>
								</div>
							</td>
						</ng-container>

						<tr mat-header-row *matHeaderRowDef="innerDisplayedColumns2"></tr>
						<tr mat-row *matRowDef="let address; columns: innerDisplayedColumns2;"
							[class.example-element-row]="address.comments?.length" [class.example-expanded-row]="address?.expanded"
							(click)="address.expanded = !address?.expanded">
						</tr>
						<tr mat-row *matRowDef="let row; columns: ['expandedExpandedDetail']" class="example-detail-row">
						</tr>
					</table>
				</div>
			</div>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="columnsToDisplay2"></tr>
	<tr mat-row *matRowDef="let element; columns: columnsToDisplay2;"
		[class.example-element-row]="element.addresses?.length" [class.example-expanded-row]="element?.expanded"
		(click)="element.expanded = !element?.expanded">
	</tr>
	<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
</table>


<!-- Copyright 2019 Google Inc. All Rights Reserved.
    Use of this source code is governed by an MIT-style license that
    can be found in the LICENSE file at http://angular.io/license -->